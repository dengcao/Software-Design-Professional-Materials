<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@include file="/common/public.jsp" %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>供应商列表</title>
	<script type="text/javascript" src="${ctx}/js/page.js"></script>
	<script type="text/javascript" src="${ctx}/js/search.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			getPartList();
			exportTable();
			//搜索
			$("#find").click(function(){
				var condition=$("#condition").val();
				var url2="${ctx}/provider/getFList?condition="+condition;
				if(condition==""){
					getPartList();
				}else{
					search.cseatch(url2);
				}
			});
		});
	</script>

	<script type="text/javascript">
		function getPartList(){
			var url="${ctx}/provider/getLimitList";
			var count=$("#count").val();
			page.pagePart(url,count);
		}
		function   customPage(obj){
			$("#table tr:gt(1)").remove();
			for(var i=0;i<obj.length;i++){
				var newRow = "<tr>" +
						"<td>"+obj[i].providerId+"</td><td>"+obj[i].providerName+"</td>" +
						"<td>"+obj[i].linkman+"</td><td>"+obj[i].linkNumber+"</td>" +
						"<td>"+obj[i].providerAdress+"</td><td>"+obj[i].remarks+"</td>" +"<td>";

				if(window.userPower==0||window.userPower==14){
					newRow=newRow+"<a href='${ctx}/provider/editProvider?id="+obj[i].providerId+"'>修改&nbsp;&nbsp;</a>"+
					"<a href='${ctx}/provider/delete?id="+obj[i].providerId+"'>删除&nbsp;&nbsp;</a>";
				}else{
					$("#add").hide();
				}

						newRow=newRow+		"<a href='${ctx}/provideFood/list?id="+obj[i].providerId+"&providerName="+obj[i].providerName+"'>查看供应食品</a></td></tr>";
				$("#table tr:last").after(newRow);

			}

		}
	</script>


</head>

<body>
<input type="hidden" id="count" value="${count}">
<div class="pagin">
	<br/>
	<a id="add" href="${ctx }/provider/add">新添供应商</a>
	<br/>   <br/>
	<input type="text" id="condition" placeholder="ID、供应商名称、联系人、联系方式或联系地址"
			style="width: 300px"><button id="find">搜索</button>
	<button id="export">导出</button>
	<br/><br/>
	<table id="table" class="t1" style="width: 80%">
		<tr ><th colspan="7">食品列表</th></tr>
		<tr>
			<td>供应商ID</td>
			<td>供应商名称</td>
			<td>联系人</td>
			<td>联系方式</td>
			<td>联系地址</td>
			<td>备注</td>
			<td>操作</td>
		</tr>
	</table>
	<br/>
	<div id="Pagination" class="pagination"
		 style=" width: -moz-fit-content;width:-webkit-fit-content;width: fit-content;margin-left: auto;margin-right: auto;" ></div>
</div>

</body>
</html>